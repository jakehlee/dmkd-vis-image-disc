# Visualizing Image Content to Explain Novel Image Discovery
### Jake Lee, Kiri Wagstaff
### In Preparation

This repository contains supplemental scripts and data used in the experiments presented in the paper.

## src/

`src/extract/deploy.prototxt` is a modified prototxt for the model `bvlc_reference_caffenet`. Originally, the model performs ReLU in-place, overwriting the `fc6` and `fc7` blobs in the process. Our modified prototxt instead writes post-ReLU values to the `relu6` and `relu7` blobs, allowing us to extract pre-ReLU activation values.

----

`src/visualize/vis_DEMUD.py`

Usage: `python vis_DEMUD.py NET_NAME EXP_PATH EXP_NAME`

* `NET_NAME` is the directory name of the model to visualize with. The `fc6-6e5`, `fc7-6e5`, and `fc8` models have been provided to visualize explanations from the corresponding representations.
* `EXP_PATH` is the path to the directory that contains results from DEMUD. The directory name should begin with `cnn-k=...`
* `EXP_NAME` is a user-specified name for the experiment. A directory with this name will be created in the current path to store the visualizations.

----

`src/util/calc_auc.py`

Usage: `python calc_auc.py`

This script calculates the nAUCt metric as specified in the paper. It will calculate the nAUCt of multiple experiments stored in the same directory. Parameters, including the results directory, `n`, and `t`, must be specified within the script. A function must be provided to extract the class label from each line in the `selections.csv` generated by DEMUD. It will also calculate the nAUCt of random selection provided the quantity of images per class (`RAND_QTY`). 

----

`src/util/plot_exp.py`

Usage: `python plot_exp.py`

This script was used to generated the discovery plots shown in the paper. Parameters must be set within the script, similarly to `calc_auc.py`. Note that, because this script was developed specifically for our set of experiments, it may be difficult to adapt to other experiments. 

----

`src/util/gen_html.py`

Usage: `python gen_html.py`

This script collects the results from DEMUD and visualizations into a single HTML file for convenient viewing. The following parameters must be set within the script.

* `outputname` defines the path of the html file generated.
* `imageset_dir` defines the directory containing the full imageset.
* `dosov_dir` defines the directory containing the visualizations generated by `vis_DEMUD.py`.
* `demud_path` defines the path of the `selections.csv` output from DEMUD.

